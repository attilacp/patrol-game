function checkAnswer(e){console.log("Verificando:",e);if(window.winnerTeam||window.currentQuestionAnswered)return console.log("Pergunta já respondida ou já temos vencedor, ignorando resposta");if(!window.gameStarted||window.winnerTeam||window.bombQuestionSystem&&window.bombQuestionSystem.isBombActive)return;var t=window.questions[window.currentQuestionIndex];if(!t)return;window.currentQuestionAnswered=!0,disableAnswerButtons();var a=document.getElementById("correct-answer"),n=document.getElementById("commentary"),o=t.gabarito||"";console.log("Gabarito original:",o);var r="";if("string"==typeof o){var l=o.toUpperCase().trim();l.includes("C")||l.includes("CERTO")||l.includes("✅")||o.includes("V")?r="CERTO":l.includes("E")||l.includes("ERRADO")||o.includes("❌")||o.includes("F")?r="ERRADO":r=l}console.log("Gabarito normalizado:",r);console.log("Resposta do jogador:",e);var d=!1;"CERTO"===r&&"CERTO"===e?d=!0:"ERRADO"===r&&"ERRADO"===e?d=!0:e===r&&(d=!0),console.log("Resposta está correta?",d),n&&(function(){var e="";t.comentario&&(e+=t.comentario),t.comentario2&&(e&&(e+="<br><br>"),e+=t.comentario2),t.comentario3&&(e&&(e+="<br><br>"),e+=t.comentario3),n.innerHTML=e,n.classList.add("active")}()),a&&(d?(a.textContent="✅ ACERTOU - GABARITO: "+r,a.className="correct-answer"):(a.textContent="❌ ERROU - GABARITO: "+r,a.className="wrong-answer")),window.teams&&window.teams[window.currentTeamIndex]&&(function(){var e=window.teams[window.currentTeamIndex],a=new CustomEvent("answerGiven",{detail:{team:e,question:t,isCorrect:d}});document.dispatchEvent(a)}()),d?(console.log("Resposta CORRETA!"),window.handleCorrectAnswer&&window.handleCorrectAnswer()):(console.log("Resposta ERRADA!"),window.handleWrongAnswer&&window.handleWrongAnswer()),showCorrectButton()}function disableAnswerButtons(){["certo-btn","errado-btn","skip-btn"].forEach(function(e){var t=document.getElementById(e);t&&(t.disabled=!0)}),window.keyboardEnabled=!1,console.log("Teclado desabilitado após resposta")}function showCorrectButton(){var e=document.getElementById("next-question-btn"),t=document.getElementById("podium-btn");window.pendingBombQuestion||(window.winnerTeam?(e&&(e.style.display="none"),t&&(t.style.display="inline-block",t.textContent="Ir para Pódio")):(t&&(t.style.display="none"),e&&(e.style.display="inline-block",e.textContent="⏭️ PRÓXIMA")))}function enableKeyboard(){window.keyboardEnabled=!0,console.log("Teclado habilitado para nova pergunta")}function resetAnswerProcessedFlag(){window.currentQuestionAnswered=!1,window.keyboardEnabled=!0,console.log("Resposta resetada, teclado habilitado")}window.checkAnswer=checkAnswer,window.disableAnswerButtons=disableAnswerButtons,window.showCorrectButton=showCorrectButton,window.enableKeyboard=enableKeyboard,window.resetAnswerProcessedFlag=resetAnswerProcessedFlag;